<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
	<link rel="stylesheet" type="text/css" href="css/style.css" />
	<title>mobMarket</title>
	<script type="text/javascript" src="phonegap.js"></script>
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script type="text/javascript" src="js/newsreader.js"></script>
	<script type="text/javascript" src="js/ysearch.js"></script>
	<script type="text/javascript" src="js/yquotes.js"></script>
</head>
<body ng-controller="mmCtrl">
	<div id="screenMain" ng-cloak>
		<div id="mainHeader" class="header">
			<div touch-action="goBack" touch-btn="{{selectedScreen}}">
				<span class="backArrow">
					<span ng-hide="selectedScreen">&nbsp;</span>
					<span ng-show="selectedScreen">&#8249;</span>
				</span>
				<img style="float: left" src="img/logo.png" />
				<span ng-hide="selectedScreen">
					<span class="mobClass">mob</span><span class="marketClass">Market</span>
				</span>
				<span ng-show="selectedScreen && selectedScreen.id != 'stockDetails' && selectedScreen.id != 'chart'">{{selectedScreen.label}}</span>
				<span ng-show="selectedStock && (selectedScreen.id == 'stockDetails' || selectedScreen.id == 'chart')">{{selectedStock.symbol}}</span>
			</div>
		</div>
		<div ng-show="selectedScreen.id == 'about'" class="content">
			<div style="text-align: left; margin: 12px;">
				<div style="float: left;">
					<span class="mobClass">mob</span><span class="marketClass">Market</span>
				</div>
				<div style="float: right;">
					<h3>Version 3.0.0</h3>
					<p>Developed by Raphael Cohen.
					If you like this app or would like to share feedback on usage, please drop us an e-mail :
					<a href="mailto:raphael.cohen@gmail.com">raphael.cohen@gmail.com</a></p>
				</div>
			</div>
		</div>
		<div ng-show="selectedScreen.id == 'watchlist'" class="content">
			<div class="noResults">
				Your watch list is empty.
				<br />Search for quotes and add a quote to your watch list.
			</div>
		</div>
		<div ng-show="loading" class="content">
			<img src="img/loader.gif" />
		</div>
		<div ng-show="!selectedScreen" class="content">
			<div ng-repeat="menuItem in screens" ng-show="menuItem.inMainMenu" class="menuItem" touch-action="selectScreen" touch-btn="{{menuItem}}">
				{{menuItem.label}}
				<div class="menuArrow">&#8250;</div>
			</div>
		</div>
		<div ng-show="selectedScreen.id == 'news'" class="content">
			<div ng-repeat="newsItem in newsItems" touch-action="openLink" touch-btn="{{newsItem.link}}" class="listItem">
				<img class="newsImage" ng-show="newsItem.image" ng-src="http:{{newsItem.image}}" />
				<div class="listTitle">{{newsItem.title}}</div>
				<div class="newsDate">{{newsItem.pubDate}}</div>
				<p class="listContent" ng-show="newsItem.content">{{newsItem.content}}</p>
			</div>
		</div>
		<div ng-show="selectedScreen.id == 'search'" class="content">
			<input class="inputSearch" type="search" name="search" placeholder="Type here to search" ng-model="searchStock" ng-change="searchChange()" />
			<div ng-show="searchStock != '' && searchResults.length == 0" class="noResults">No results found</div>
			<div ng-repeat="searchResult in searchResults" touch-action="selectStock" touch-btn="{{searchResult}}" class="listItem">
				<div class="floatingBadge">{{searchResult.symbol}}</div>
				<div class="listTitle">{{searchResult.name}}</div>
				<div class="listContent"><b>Exchange: </b>{{searchResult.exchDisp || searchResult.exch}}</div>
				<div class="listContent"><b>Type: </b>{{searchResult.typeDisp || searchResult.type}}</div>
			</div>
		</div>
		<div ng-show="selectedScreen.id == 'stockDetails'" class="content">
			<div class="stockDetails" ng-show="selectedStock.stockData">
				<div class="stockDetailsHead">
					<div style="float: right">({{selectedStock.exchDisp || selectedStock.exch}} - {{selectedStock.typeDisp || selectedStock.type}})</div>
					<div style="font-size: 18px;">{{selectedStock.name}}</div>
				</div>
				<div class="listItem">
					<table class="dataTable">
						<tr>
							<td class="dataLabel" style="text-align: left;">Last</td>
							<td ng-class="getDataCellClass(selectedStock.stockData.ChangeRealtime)" style="text-align: right; color: {{}}">
								{{selectedStock.stockData.LastTradePriceOnly}}
								<span ng-show="selectedStock.stockData.ChangeRealtime && selectedStock.stockData.ChangeRealtime.indexOf('+') >= 0">&#8599;</span>
								<span ng-show="selectedStock.stockData.ChangeRealtime && selectedStock.stockData.ChangeRealtime.indexOf('-') >= 0">&#8600;</span>
							</td>
						</tr>
						<tr>
							<td class="dataLabel" style="text-align: left;">Change</td>
							<td ng-class="getDataCellClass(selectedStock.stockData.ChangeRealtime)" style="text-align: right;">
								{{selectedStock.stockData.ChangeRealtime}}
								{{selectedStock.stockData.ChangeinPercent}}
							</td>
						</tr>
						<tr>
							<td class="dataLabel" style="text-align: left;">Last Trade Time</td>
							<td class="dataCell" style="text-align: right;">{{selectedStock.stockData.LastTradeTime}}</td>
						</tr>
						<tr>
							<td class="dataLabel" style="text-align: left;">Prev. Close</td>
							<td class="dataCell" style="text-align: right;">{{selectedStock.stockData.PreviousClose}}</td>
						</tr>
						<tr>
							<td class="dataLabel" style="text-align: left;">Open</td>
							<td class="dataCell" style="text-align: right;">{{selectedStock.stockData.Open}}</td>
						</tr>
						<tr>
							<td class="dataLabel" style="text-align: left;">Bid</td>
							<td class="dataCell" style="text-align: right;">{{selectedStock.stockData.BidRealtime}}</td>
						</tr>
						<tr>
							<td class="dataLabel" style="text-align: left;">Ask</td>
							<td class="dataCell" style="text-align: right;">{{selectedStock.stockData.AskRealtime}}</td>
						</tr>
						<tr>
							<td class="dataLabel" style="text-align: left;">Volume</td>
							<td class="dataCell" style="text-align: right;">{{selectedStock.stockData.Volume}}</td>
						</tr>
						<tr>
							<td class="dataLabel" style="text-align: left;">Market Cap</td>
							<td class="dataCell" style="text-align: right;">{{selectedStock.stockData.MarketCapitalization}}</td>
						</tr>
					</table>
				</div>
				<div class="toggleButton" touch-action="toggleExtended" touch-btn="">
					Extended
					<div class="extendArrow" ng-hide="showExtended">&#8853;</div>
					<div class="extendArrow" ng-show="showExtended">&#8855;</div>
				</div>
				<div class="listItem" ng-show="showExtended">
					<table class="dataTable">
						<tr ng-repeat="(key, val) in selectedStock.stockData" ng-show="val && val != 'N/A - N/A'">
							<td class="dataLabel" style="text-align: left;">{{key}}</td>
							<td class="dataCell" style="text-align: right;" ng-bind-html="val"></td>
						</tr>
					</table>
				</div>
				<div class="menuItem" style="margin: 4px;" touch-action="selectedStockAction" touch-btn="chart">
					Historical Chart
					<div class="menuArrow">&#8250;</div>
				</div>
				<div class="menuItem" style="margin: 4px;" touch-action="selectedStockAction" touch-btn="news">
					News
					<div class="menuArrow">&#8250;</div>
				</div>
				<div class="menuItem" style="margin: 4px;" touch-action="selectedStockAction" touch-btn="watchlist">
					Add to Watch List
					<div class="menuArrow">&#8250;</div>
				</div>
			</div>
		</div>
		<div ng-show="selectedScreen.id == 'chart'" class="content">
			<div class="stockDetailsHead">
				<div style="float: right">({{selectedStock.exchDisp || selectedStock.exch}} - {{selectedStock.typeDisp || selectedStock.type}})</div>
				<div style="font-size: 18px;">{{selectedStock.name}}</div>
			</div>
			<div class="chart" draw-canvas=""></div>
		</div>
	</div>
	<script type="text/javascript" src="js/angular.min.js"></script>
	<script type="text/javascript" src="js/angular-sanitize.min.js"></script>
	<script type="text/javascript" src="js/mmcontroller.js"></script>
</body>
</html>